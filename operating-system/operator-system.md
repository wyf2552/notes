# 1 计算机系统概述
## 1.1 操作系统的基本概念
###  1.1.1 操作系统的概念
操作系统是指控和管理整个计算机系统的硬件与软件资源，合理地组织、调度计算机的工作与资源的分配，进而为用户和其他软件提供方便借口与环境的程序集合。操作系统是计算机系统中最基本的系统软件。

### 1.1.2 操作系统的功能和目标（向上层提供方便易用的服务）
1. 操作系统作为计算机系资源的管理者
    1.处理机管理
    在多道程序环境下，处理机的分配和运行都以进程为基本单位，因此对处理机的管理可归结为对进程的管理。并发是指在计算机内同时运行多个进程，因此进程何时创建、何时撤销、如何管理、如何避免冲突、合理共享就是进程管理最主要的任务。进程管理的主要功能包括进程控制、进程同步、进程通信、死锁处理、处理机调度等。

    2. 存储器管理
    存储器管理是为了给多道程序的运行提供良好的环境，方便用户提供使用及提高内存的利用率，主要包括内存分配与回收、地址映射、内存保护与共享和内存扩展等功能。

    3. 文件管理
    计算机中的信息都是以文件的形式存在的，操作系统中负责文件管理的部分称为文件系统。文件管理包括文件存储空间的管理、目录管理及文件读/写管理和保护等。

    4. 设备管理
    设备管理的主要任务是完成用户的I/O请求，方便用户使用各种设备，提高设备的利用率，主要包括缓冲管理、设备分配、设备处理和虚拟设备等功能。

2. 操作系统作为用户与计算机硬件系统之间的接口
    1. 命令接口
    联机命令接口也称交互式命令接口，适用于分时或实时系统的接口。用户通过控制台或终端输入操作命令，向系统提出各种服务要求。

    脱机命令接口也称批处理命令接口，适用于批处理系统。脱机用户不能直接干预作业的运行，而应事先用相应的作业控制命令编写一份作业操作说明书，连同作业一起提交给系统。当系统调度到作业时，由系统中的命令解释程序逐条解释执行作业说明书上的命令，进而间接地控制作业的运行。

    2. 程序接口
    程序接口由一组系统调用组成。用户通过在程序中使用这些系统调用来请求操作系统为其提供服务。当前最流行的是图形用户界面GUI，即图形接口。GUI最终是通过调用程序接口实现的，用户通过鼠标和键盘在图形界面上单击或使用快捷键，就能方便地使用操作系统。

3. 操作系统实现了对计算机资源的扩充
    裸机在最内层，外面是操作系统。操作系统所提供的资源管理功能和方便用户的各种服务功能能讲裸机改造成功能更强、使用更方便的机器。通常将覆盖了软件的机器称为扩充机器或虚拟机。

### 1.1.3 操作系统的特征
1. 并发
    并发是指两个或多个事件在同一时间间隔内发生。并行性是指系统具有同时进行运算或操作的特性，在同一时刻能完成两种或两种以上的工作。

2. 共享
    资源共享即共享，是指系统中的资源可供内存中的资源可供内存中多个并发执行的进程共同使用。
    1. 互斥共享方式
        规定在一段时间内指允许一个进程访问该资源。仅当A访问完并释放该资源后，才允许另一个进程对该资源进行访问。我们将这种资源共享方式称为互斥共享，而将在一段时间内只允许一个进程访问的资源称为临界资源。

    2. 同时访问方式
        这类资源允许一段时间内多个进程“同时”访问。在微观上，这些进程可能是交替地对该资源进行访问，即“分时共享”的。

并发和共享是操作系统两个最基本的特征，两者之间互为存在的条件：1. 资源共享是以程序的并发为条件的，若系统不允许程序并发执行，则自然不存在资源共享问题；2. 若系统不能对资源共享实施有效的管理，则必将影响到程序的并发执行，甚至根本无法并发执行。

3. 虚拟
    虚拟是指将一个物理上的实体编程若干个逻辑上的对应物。操作系统的虚拟技术可归纳为：时分复用技术，如虚拟机处理器；空分复用技术，如虚拟存储器。

    利用多道程序设计技术将一个物理上的CPU虚拟为多个逻辑上的CPU，称为虚拟处理器。

4. 异步
    多道程序环境允许多个程序并发执行，但由于资源有限，进程的执行并不是一贯到底的，而是走走停停，它以不可预知的速度前进，这就是进程的异步性。

## 1.2 操作系统发展历程
### 1.2.1 手工操作阶段
用户在计算机上算题的所有工作都要人工干预。手工操作阶段有两个突出的缺点：1. 用户独占全机，虽然不会出现因资源已被其他用户占用而等待的现象，但资源利用率低。 2. CPU等待手工操作，CPU的利用不充分。

### 1.2.2 批处理阶段
1. 单道批处理系统、
    为实现对作业的连续处理，需要先将一批作业以脱机方式输入磁带，并在系统中配上监督程序，在其控制下，使这批作业能一个接一个地连续处理。
    1. 自动性。在顺利情况下，磁带的一批作业能自动地逐个运行，而无需人工干预。
    2. 顺序性。磁带上的各道作业顺序地进入内存，先调入内存的作业先完成。
    3. 单道性。内存中仅有一道程序运行，即监督程序每次从磁带上只调入一道程序进入内存运行，当该程序完成或发生异常情况下，才换入其后继程序进入内存运行。

    面临的问题是：每次主机内存中仅存放一道作业，每当它在运行期间发出输入/输出请求后，高速的CPU便处于等待低速的I/O完成状态。

2. 多道批处理系统
    多道程序的设计的特点是多道、宏观上并行、微观上串行。
    1. 多道。计算机内存中同时存放多道相互独立的程序。
    2. 宏观上并行。同时进入多道程序都处于运行过程中，但都未运行完毕。
    3. 微观上串行。内存中的多道程序轮流占有CPU，交替执行。

    多道程序设计技术的实现需要解决下列问题：
    1. 如何分配处理器
    2. 多道程序的内存分配问题
    3. I/O设备如何分配
    4. 如何组织和存放大量的程序和数据，以便用户使用并保证其安全性与一致性。

    优点：资源利用率高，多道程序共享计算机资源，从而使各种资源得到充分利用；系统吞吐量大，CPU和其他资源保持“忙碌”状态。缺点：用户响应的时间较长；不提供人机交互能力，用户即不能了解自己的运行情况，又不能控制计算机。

### 1.2.3 分时操作系统
所谓分时，是指将处理器的运行时间分成很短的时间片，按时间片轮流将处理器分配给各联机作业使用

分时操作系统是指多个用户通过终端共享一台主机，这些终端连接在主机上，用户可以同时与主机进行交互操作而互不干扰。

分时操作系统的特征：
1. 同时性。同时性也称多路性，指允许多个终端用户同时使用一台计算机。
2. 交互性。用户通过终端采用人机对话的方式直接控制程序运行，与同程序进行交互
3. 独立性。系统中多个用户可以彼此独立地进行操作，互不干扰，单个用户感觉不到别人也在使用这台计算机。

### 1.2.4 实时操作系统
为了能在某个限制内完成某些紧急任务而不需要时间片排队，诞生了实时操作系统。分为两种情况：若某个动作必须绝对地在规定的时刻发生，则称为硬实时系统。若能够接受偶尔违反时间规定且不会引起任何永久性的损害，则称为软实时系统。

实时操作系统的主要特点是及时性和可靠性。

### 1.2.5 网络操作系统和分布式操作系统
网络操作系统是伴随着计算机网络的发展而诞生的，它把网络中的各台计算机有机的结合起来，实现各台计算机之间的通信和数据传送功能，实现网络中各种资源的共享。

分布式计算机系统是由多台计算机组成并满足下列条件的系统：系统中任意两台计算机通过通信方式交换信息；每台计算机都具有同等的地位，即没有主机也没有从机；每台计算机上的资源为所有用户共享；系统中的任意台计算机都可以构成一个子系统，并且还能重构；任何工作都可以分布在几台计算机上，由它们并行工作、协同完成。特点是

